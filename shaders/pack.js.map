{
  "version": 3,
  "sources": ["pack.ts"],
  "sourcesContent": ["import type {} from './iris'\r\n\r\n// a texture which can be safely read from and written to in different places\r\n// it works by having texture A and texture B\r\n// if you want to \"flip\" the texture, you call .startFlip() before the pass and .endFlip() after the pass\r\n// use the .getWrite() \r\nclass FlippableTexture {\r\n    constructor(name: string){\r\n        this.textureA = new Texture(name + \"_a\");\r\n        this.textureB = new Texture(name + \"_b\");\r\n\r\n        this.referenceRead = new TextureReference(name);\r\n        this.referenceWrite = new TextureReference(name + \"_w\");\r\n    }\r\n\r\n\r\n\r\n    format(internalFormat: InternalTextureFormat): FlippableTexture {\r\n        this.textureA.format(internalFormat);\r\n        this.textureB.format(internalFormat);\r\n        this.reference.format(internalFormat);\r\n\r\n        return this;\r\n    }\r\n\r\n    width(width: number): FlippableTexture {\r\n        this.textureA.width(width);\r\n        this.textureB.width(width);\r\n        this.reference.width(width);\r\n\r\n        return this;\r\n    }\r\n\r\n    height(height: number): FlippableTexture {\r\n        this.textureA.height(height);\r\n        this.textureB.height(height);\r\n        this.reference.height(height);\r\n\r\n        return this;\r\n    }\r\n\r\n    depth(depth: number): FlippableTexture {\r\n        this.textureA.depth(depth);\r\n        this.textureB.depth(depth);\r\n        this.reference.depth(depth);\r\n\r\n        return this;\r\n    }\r\n\r\n    clearColor(r: number, g: number, b: number, a: number): FlippableTexture {\r\n        this.textureA.clearColor(r, g, b, a);\r\n        this.textureB.clearColor(r, g, b, a);\r\n        \r\n        return this;\r\n    }\r\n\r\n    clear(clear: boolean): FlippableTexture {\r\n        this.textureA.clear(clear);\r\n        this.textureB.clear(clear);\r\n\r\n        return this;\r\n    }\r\n\r\n    mipmap(mipmap: boolean): FlippableTexture {\r\n        this.textureA.mipmap(mipmap);\r\n        this.textureB.mipmap(mipmap);\r\n\r\n        return this;\r\n    }\r\n\r\n    build(): FlippableTexture {\r\n        this.textureA.build();\r\n        this.textureB.build();\r\n\r\n        this.referenceRead.pointTo(this.textureA);\r\n        this.referenceWrite.pointTo(this.textureB);\r\n\r\n        return this;\r\n    }\r\n}\r\n\r\nfunction setLightColors(){\r\n    // colours stolen from null\r\n\r\n    setLightColor(new NamespacedId(\"campfire\"), 255, 102, 0, 255);\r\n    setLightColor(new NamespacedId(\"candle\"), 245, 127, 68, 255);\r\n    setLightColor(new NamespacedId(\"cave_vines\"), 243, 133, 59, 255);\r\n    setLightColor(new NamespacedId(\"cave_vines_plant\"), 243, 133, 59, 255);\r\n    setLightColor(new NamespacedId(\"glow_lichen\"), 107, 238, 172, 255);\r\n    setLightColor(new NamespacedId(\"lantern\"), 243, 158, 73, 255);\r\n    setLightColor(new NamespacedId(\"jack_o_lantern\"), 193, 100, 38, 255);\r\n    setLightColor(new NamespacedId(\"magma_block\"), 193, 100, 38, 255);\r\n    setLightColor(new NamespacedId(\"ochre_froglight\"), 223, 172, 71, 255);\r\n    setLightColor(new NamespacedId(\"pearlescent_froglight\"), 224, 117, 232, 255);\r\n    setLightColor(new NamespacedId(\"redstone_torch\"), 249, 50, 28, 255);\r\n    setLightColor(new NamespacedId(\"redstone_wall_torch\"), 249, 50, 28, 255);\r\n    setLightColor(new NamespacedId(\"soul_campfire\"), 51, 204, 255, 255);\r\n    setLightColor(new NamespacedId(\"verdant_froglight\"), 99, 229, 60, 255);\r\n    setLightColor(new NamespacedId(\"torch\"), 255, 119, 0, 255);\r\n    setLightColor(new NamespacedId(\"wall_torch\"), 255, 119, 0, 255);\r\n    setLightColor(new NamespacedId(\"nether_portal\"), 100, 0, 255, 255);\r\n\r\n    setLightColor(new NamespacedId(\"small_amethyst_bud\"), 184, 88, 221, 255);\r\n    setLightColor(new NamespacedId(\"medium_amethyst_bud\"), 184, 88, 221, 255);\r\n    setLightColor(new NamespacedId(\"large_amethyst_bud\"), 184, 88, 221, 255);\r\n    setLightColor(new NamespacedId(\"amethyst_cluster\"), 184, 88, 221, 255);\r\n\r\n    const glassOpacity = 255;\r\n\r\n    setLightColor(new NamespacedId(\"tinted_glass\"), 50, 38, 56, glassOpacity);\r\n    setLightColor(new NamespacedId(\"white_stained_glass\"),      255, 255, 255, glassOpacity);\r\n    setLightColor(new NamespacedId(\"white_stained_glass_pane\"), 255, 255, 255, glassOpacity);\r\n    setLightColor(new NamespacedId(\"light_gray_stained_glass\"),      153, 153, 153, glassOpacity);\r\n    setLightColor(new NamespacedId(\"light_gray_stained_glass_pane\"), 153, 153, 153, glassOpacity);\r\n    setLightColor(new NamespacedId(\"gray_stained_glass\"),      76, 76, 76, glassOpacity);\r\n    setLightColor(new NamespacedId(\"gray_stained_glass_pane\"), 76, 76, 76, glassOpacity);\r\n    setLightColor(new NamespacedId(\"black_stained_glass\"),      25, 25, 25, glassOpacity);\r\n    setLightColor(new NamespacedId(\"black_stained_glass_pane\"), 25, 25, 25, glassOpacity);\r\n    setLightColor(new NamespacedId(\"brown_stained_glass\"),      102, 76, 51, glassOpacity);\r\n    setLightColor(new NamespacedId(\"brown_stained_glass_pane\"), 102, 76, 51, glassOpacity);\r\n\r\n    setLightColor(new NamespacedId(\"red_stained_glass\"),      153, 51, 51, glassOpacity);\r\n    setLightColor(new NamespacedId(\"red_stained_glass_pane\"), 153, 51, 51, glassOpacity);\r\n    setLightColor(new NamespacedId(\"orange_stained_glass\"),      216, 127, 51, glassOpacity);\r\n    setLightColor(new NamespacedId(\"orange_stained_glass_pane\"), 216, 127, 51, glassOpacity);\r\n    setLightColor(new NamespacedId(\"yellow_stained_glass\"),      229, 229, 51, glassOpacity);\r\n    setLightColor(new NamespacedId(\"yellow_stained_glass_pane\"), 229, 229, 51, glassOpacity);\r\n    setLightColor(new NamespacedId(\"lime_stained_glass\"),      127, 204, 25, glassOpacity);\r\n    setLightColor(new NamespacedId(\"lime_stained_glass_pane\"), 127, 204, 25, glassOpacity);\r\n    setLightColor(new NamespacedId(\"green_stained_glass\"),      102, 127, 51, glassOpacity);\r\n    setLightColor(new NamespacedId(\"green_stained_glass_pane\"), 102, 127, 51, glassOpacity);\r\n    setLightColor(new NamespacedId(\"cyan_stained_glass\"),      76, 127, 153, glassOpacity);\r\n    setLightColor(new NamespacedId(\"cyan_stained_glass_pane\"), 76, 127, 153, glassOpacity);\r\n    setLightColor(new NamespacedId(\"light_blue_stained_glass\"),      102, 153, 216, glassOpacity);\r\n    setLightColor(new NamespacedId(\"light_blue_stained_glass_pane\"), 102, 153, 216, glassOpacity);\r\n    setLightColor(new NamespacedId(\"blue_stained_glass\"),      51, 76, 178, glassOpacity);\r\n    setLightColor(new NamespacedId(\"blue_stained_glass_pane\"), 51, 76, 178, glassOpacity);\r\n    setLightColor(new NamespacedId(\"purple_stained_glass\"),      127, 63, 178, glassOpacity);\r\n    setLightColor(new NamespacedId(\"purple_stained_glass_pane\"), 127, 63, 178, glassOpacity);\r\n    setLightColor(new NamespacedId(\"magenta_stained_glass\"),      178, 76, 216, glassOpacity);\r\n    setLightColor(new NamespacedId(\"magenta_stained_glass_pane\"), 178, 76, 216, glassOpacity);\r\n    setLightColor(new NamespacedId(\"pink_stained_glass\"),      242, 127, 165, glassOpacity);\r\n    setLightColor(new NamespacedId(\"pink_stained_glass_pane\"), 242, 127, 165, glassOpacity);\r\n}\r\n\r\nfunction defineBoolGlobally(define){\r\n    if(getBoolSetting(define)){\r\n        defineGlobally(define, 1);\r\n    }\r\n}\r\n\r\n\r\nexport function setupShader(dimension : NamespacedId) {  \r\n    defineBoolGlobally(\"BLOOM_ENABLE\");\r\n    defineBoolGlobally(\"TEMPORAL_FILTER_ENABLE\");\r\n    defineGlobally(\"SHADOW_SAMPLES\", getIntSetting(\"SHADOW_SAMPLES\"));\r\n    defineBoolGlobally(\"SSGI_ENABLE\");\r\n    defineBoolGlobally(\"DEBUG_ENABLE\");\r\n\r\n    enableShadows(1024, 4);\r\n\r\n    setLightColors();\r\n\r\n    const maxMip = Math.floor(Math.log2(Math.max(screenWidth, screenHeight)));\r\n\r\n    // worldSettings.ambientOcclusionLevel = getBoolSetting(\"SSGI_ENABLE\") ? 0.0 : 1.0;\r\n    worldSettings.disableShade = true;\r\n    worldSettings.renderEntityShadow = false;\r\n    worldSettings.sunPathRotation = 40.0;\r\n    worldSettings.renderSun = false;\r\n    worldSettings.renderWaterOverlay = false;\r\n    worldSettings.shadowNearPlane;\r\n\r\n    const sceneData = new GPUBuffer(32)\r\n        .clear(true)\r\n        .build();\r\n\r\n    const blueNoiseTex = new PNGTexture(\"blueNoiseTex\", \"textures/blueNoise.png\", false, true);\r\n    const perlinNoiseTex = new PNGTexture(\"perlinNoiseTex\", \"textures/perlinNoise.png\", true, true);\r\n    const worleyNoiseTex = new PNGTexture(\"worleyNoiseTex\", \"textures/worleyNoise.png\", true, true);\r\n\r\n    const cloudShapeNoiseTex = new RawTexture(\"cloudShapeNoiseTex\", \"textures/cloudNoiseShape.bin\")\r\n        .width(128)\r\n        .height(128)\r\n        .depth(128)\r\n        .type(PixelType.UNSIGNED_BYTE)\r\n        .format(Format.RGBA8)\r\n        .blur(true)\r\n        .build();\r\n\r\n    const cloudErosionNoiseTex = new RawTexture(\"cloudErosionNoiseTex\", \"textures/cloudNoiseErosion.bin\")\r\n        .width(32)\r\n        .height(32)\r\n        .depth(32)\r\n        .type(PixelType.UNSIGNED_BYTE)\r\n        .format(Format.RGB8)\r\n        .blur(true)\r\n        .build();\r\n\r\n    const cloudHeightGradientTex = new PNGTexture(\"cloudHeightGradientTex\", \"textures/cloudHeightGradient.png\", false, true);\r\n\r\n    const debugTex = new Texture(\"debugTex\")\r\n        .format(Format.RGBA8)\r\n        .imageName(\"debugImg\")\r\n        .width(screenWidth).height(screenHeight)\r\n        .clear(true)\r\n        .clearColor(0, 0, 0, 0)\r\n        .build()\r\n\r\n    const previousSceneTex = new Texture(\"previousSceneTex\")\r\n        .format(Format.RGB16F)\r\n        .clear(false)\r\n        .mipmap(true)\r\n        .build();\r\n\r\n    const previousDepthTex = new Texture(\"previousDepthTex\")\r\n        .format(Format.RG16)\r\n        .clear(false)\r\n        .mipmap(true)\r\n        .build();\r\n\r\n    // ======================= SETUP =======================\r\n\r\n    const sunTransmittanceLUT = new Texture(\"sunTransmittanceLUTTex\")\r\n        .format(Format.RGBA16F)\r\n        .imageName(\"sunTransmittanceLUT\")\r\n        .width(256).height(64)\r\n        .clear(false)\r\n        .build();\r\n\r\n    registerShader(\r\n        Stage.SCREEN_SETUP,\r\n        new Compute(\"generateSunTransmittanceLUT\")\r\n        .location(\"program/sky/generateSunTransmittanceLUT.csh\")\r\n        .workGroups(32, 8, 1)\r\n        .build()\r\n    )\r\n\r\n    const multipleScatteringLUT = new Texture(\"multipleScatteringLUTTex\")\r\n        .format(Format.RGBA16F)\r\n        .imageName(\"multipleScatteringLUT\")\r\n        .width(32).height(32)\r\n        .clear(false)\r\n        .build();\r\n\r\n    registerShader(\r\n        Stage.SCREEN_SETUP,\r\n        new Compute(\"generateMultipleScatteringLUT\")\r\n        .location(\"program/sky/generateMultipleScatteringLUT.csh\")\r\n        .workGroups(4, 4, 1)\r\n        .build()\r\n    )\r\n\r\n    const skyViewLUT = new Texture(\"skyViewLUTTex\")\r\n        .format(Format.RGBA16F)\r\n        .imageName(\"skyViewLUT\")\r\n        .width(200).height(200)\r\n        .clear(true)\r\n        .mipmap(true)\r\n        .build()\r\n\r\n    // ======================= PREPARE =======================\r\n\r\n    registerShader(\r\n        Stage.PRE_RENDER,\r\n        new Compute(\"generateSkyViewLUT\")\r\n        .location(\"program/sky/generateSkyViewLUT.csh\")\r\n        .workGroups(25, 25, 1)\r\n        .ssbo(0, sceneData)\r\n        .build()\r\n    )\r\n\r\n    registerShader(\r\n        Stage.PRE_RENDER,\r\n        new GenerateMips(skyViewLUT)\r\n    );\r\n\r\n    registerShader(\r\n        Stage.PRE_RENDER,\r\n        new Compute(\"getSkylightColor\")\r\n        .location(\"program/sky/getSkylightColor.csh\")\r\n        .workGroups(1, 1, 1)\r\n        .ssbo(0, sceneData)\r\n        .build()\r\n    )\r\n\r\n    registerShader(Stage.PRE_RENDER, new MemoryBarrier(SSBO_BIT));\r\n\r\n    const cloudSkyLUT = new Texture(\"cloudSkyLUTTex\")\r\n        .format(Format.RGBA16F)\r\n        .width(512).height(512)\r\n        .clear(false)\r\n        .mipmap(true)\r\n        .build()\r\n\r\n    registerShader(\r\n        Stage.PRE_RENDER, \r\n        new Composite(\"renderCloudSKYLUT\")\r\n        .vertex(\"program/fullscreen.vsh\")\r\n        .fragment(\"program/prepare/renderCloudSkyLUT.fsh\")\r\n        .target(0, cloudSkyLUT)\r\n        .ssbo(0, sceneData)\r\n        .build()\r\n    );\r\n\r\n    registerShader(\r\n        Stage.PRE_RENDER,\r\n        new GenerateMips(previousSceneTex)\r\n    );\r\n\r\n    // ======================= SHADOW =======================\r\n\r\n    // these must be multiples of 64\r\n    const voxelMapWidth = 256;\r\n    const voxelMapHeight = 128;\r\n\r\n    defineGlobally(\"VOXEL_MAP_SIZE\", `vec3(${voxelMapWidth}, ${voxelMapHeight}, ${voxelMapWidth})`);\r\n\r\n    const floodfillVoxelMap1 = new Texture(\"floodFillVoxelMapTex1\")\r\n        .format(Format.RGBA16F)\r\n        .imageName(\"floodFillVoxelMap1\")\r\n        .clear(false)\r\n        .width(voxelMapWidth)\r\n        .height(voxelMapHeight)\r\n        .depth(voxelMapWidth)\r\n        .build();\r\n\r\n    const floodfillVoxelMap2 = new Texture(\"floodFillVoxelMapTex2\")\r\n        .format(Format.RGBA16F)\r\n        .imageName(\"floodFillVoxelMap2\")\r\n        .clear(false)\r\n        .width(voxelMapWidth)\r\n        .height(voxelMapHeight)\r\n        .depth(voxelMapWidth)\r\n        .build()\r\n\r\n    const voxelMap = new Texture(\"voxelMapTex\")\r\n        .format(Format.R32UI)\r\n        .imageName(\"voxelMap\")\r\n        .clear(true)\r\n        .clearColor(0.0, 0.0, 0.0, 0.0)\r\n        .width(voxelMapWidth)\r\n        .height(voxelMapHeight)\r\n        .depth(voxelMapWidth)\r\n        .build()\r\n\r\n    const shadowColorTex = new ArrayTexture(\"shadowColorTex\")\r\n    .format(Format.RGBA8)\r\n    .clear(true)\r\n    .build();\r\n\r\n    const shadowNormalTex = new ArrayTexture(\"shadowNormalTex\")\r\n        .format(Format.RGBA8)\r\n        .clear(true)\r\n        .clearColor(0.0, 0.0, 0.0, 0.0)\r\n        .build();\r\n\r\n    const shadowPositionTex = new ArrayTexture(\"shadowPositionTex\")\r\n        .format(Format.RGB16F)\r\n        .clear(true)\r\n        .build()\r\n\r\n    const shadowMaskTex = new ArrayTexture(\"shadowMaskTex\")\r\n        .format(Format.R8UI)\r\n        .clear(true)\r\n        .build()\r\n\r\n\r\n    registerShader(\r\n        new ObjectShader(\"shadow\", Usage.SHADOW)\r\n        .vertex(\"program/gbuffer/shadow.vsh\")\r\n        .fragment(\"program/gbuffer/shadow.fsh\")\r\n        .target(0, shadowColorTex)\r\n        .target(1, shadowNormalTex)\r\n        .target(2, shadowPositionTex)\r\n        .target(3, shadowMaskTex)\r\n\r\n        .blendFunc(0, Func.ONE, Func.ZERO, Func.ONE, Func.ZERO)\r\n        .blendFunc(1, Func.ONE, Func.ZERO, Func.ONE, Func.ZERO)\r\n        .blendFunc(2, Func.ONE, Func.ZERO, Func.ONE, Func.ZERO)\r\n        .build()\r\n    );\r\n\r\n    registerShader(\r\n        new ObjectShader(\"point\", Usage.POINT)\r\n        .vertex(\"program/gbuffer/pointShadow.vsh\")\r\n        .fragment(\"program/gbuffer/pointShadow.fsh\")\r\n        .build()\r\n    );\r\n\r\n    // ======================= SHADOW COMPOSITE =======================\r\n\r\n    registerShader(\r\n        Stage.POST_SHADOW,\r\n        new Compute(\"floodfillPropagate\")\r\n        .location(\"program/composite/floodfillPropagate.csh\")\r\n        .workGroups(voxelMapWidth / 4, voxelMapHeight / 4, voxelMapWidth / 4)\r\n        .build()\r\n    );\r\n\r\n    registerShader(Stage.POST_SHADOW, new MemoryBarrier(IMAGE_BIT));\r\n\r\n    // ======================= GBUFFERS =======================\r\n    const sceneTex = new Texture(\"sceneTex\")\r\n        .format(Format.RGB16F)\r\n        .clear(true)\r\n        .clearColor(0.0, 0.0, 0.0, 1.0)\r\n        .build();\r\n\r\n    const translucentsTex = new Texture(\"translucentsTex\")\r\n        .format(Format.RGBA16F)\r\n        .clear(true)\r\n        .clearColor(0, 0, 0, 0)\r\n        .build();\r\n\r\n    const gbufferDataTex1 = new Texture(\"gbufferDataTex1\")\r\n        .format(Format.RGBA16)\r\n        .clear(true)\r\n        .build()\r\n\r\n    const gbufferDataTex2 = new Texture(\"gbufferDataTex2\")\r\n        .format(Format.RGBA16)\r\n        .clear(true)\r\n        .build()\r\n\r\n    registerShader(\r\n        new ObjectShader(\"sky\", Usage.SKYBOX)\r\n        .vertex(\"program/gbuffer/sky.vsh\")\r\n        .fragment(\"program/gbuffer/sky.fsh\")\r\n        .define(\"SKY_BASIC\", \"1\")\r\n        .target(0, sceneTex)\r\n        .build()\r\n    );\r\n\r\n    registerShader(\r\n        new ObjectShader(\"sky\", Usage.SKY_TEXTURES)\r\n        .vertex(\"program/gbuffer/sky.vsh\")\r\n        .fragment(\"program/gbuffer/sky.fsh\")\r\n        .define(\"SKY_TEXTURED\", \"2\")\r\n        .target(0, sceneTex)\r\n        .build()\r\n    );\r\n\r\n    const deferredGbuffers = [\r\n        Usage.TERRAIN_SOLID,\r\n        Usage.TERRAIN_CUTOUT,\r\n        Usage.ENTITY_SOLID,\r\n        Usage.ENTITY_CUTOUT,\r\n        Usage.BLOCK_ENTITY,\r\n        Usage.PARTICLES,\r\n        Usage.EMISSIVE,\r\n\r\n    ];\r\n\r\n    const forwardGbuffers = [\r\n        Usage.TERRAIN_TRANSLUCENT,\r\n        Usage.ENTITY_TRANSLUCENT,\r\n        Usage.BLOCK_ENTITY_TRANSLUCENT,\r\n        Usage.PARTICLES_TRANSLUCENT,\r\n        Usage.HAND,\r\n        Usage.TRANSLUCENT_HAND,\r\n        Usage.TEXTURED,\r\n        Usage.BASIC,\r\n        Usage.TEXT\r\n    ];\r\n\r\n    deferredGbuffers.forEach(program => {\r\n        registerShader(\r\n            new ObjectShader(\"terrain\", program)\r\n            .vertex(\"program/gbuffer/main.vsh\")\r\n            .fragment(\"program/gbuffer/main.fsh\")\r\n            .target(0, sceneTex)\r\n            .target(1, gbufferDataTex1)\r\n            .target(2, gbufferDataTex2)\r\n            // .blendOff(1)\r\n            // .blendOff(2)\r\n            .ssbo(0, sceneData)\r\n            .build()\r\n        );\r\n    })\r\n\r\n    forwardGbuffers.forEach(program => {\r\n        registerShader(\r\n            new ObjectShader(\"terrain\", program)\r\n            .vertex(\"program/gbuffer/main.vsh\")\r\n            .fragment(\"program/gbuffer/main.fsh\")\r\n            .target(0, translucentsTex)\r\n            .target(1, gbufferDataTex1)\r\n            .target(2, gbufferDataTex2)\r\n            .blendFunc(1, Func.ONE, Func.ZERO, Func.ONE, Func.ZERO)\r\n            .blendFunc(2, Func.ONE, Func.ZERO, Func.ONE, Func.ZERO)\r\n            .define(\"FORWARD_LIGHTING\", \"1\")\r\n            .ssbo(0, sceneData)\r\n            .build()\r\n        );\r\n    })\r\n\r\n\r\n    registerShader(\r\n        new ObjectShader(\"clouds\", Usage.CLOUDS)\r\n        .vertex(\"program/gbuffer/discard.vsh\")\r\n        .fragment(\"program/gbuffer/discard.fsh\")\r\n        .build()\r\n    );\r\n\r\n    // ======================= DEFERRED =======================\r\n\r\n    \r\n    registerShader(Stage.PRE_TRANSLUCENT, new MemoryBarrier(IMAGE_BIT));\r\n\r\n    const globalIlluminationTex = new Texture(\"globalIlluminationTex\")\r\n        .format(Format.R11F_G11F_B10F)\r\n        .clear(false)\r\n        .width(parseInt(screenWidth * 0.5))\r\n        .height(parseInt(screenHeight * 0.5))\r\n        .build();\r\n\r\n    registerShader(\r\n        Stage.PRE_TRANSLUCENT,\r\n        new Composite(\"deferredShading\")\r\n        .vertex(\"program/fullscreen.vsh\")\r\n        .fragment(\"program/composite/deferredShading.fsh\")\r\n        .target(0, sceneTex)\r\n        .ssbo(0, sceneData)\r\n        .build()\r\n    );\r\n\r\n    if(getBoolSetting(\"SSGI_ENABLE\")){\r\n        registerShader(\r\n            Stage.PRE_TRANSLUCENT,\r\n            new Composite(\"globalIllumination\")\r\n            .vertex(\"program/fullscreen.vsh\")\r\n            .fragment(\"program/composite/SSGI.fsh\")\r\n            .target(0, globalIlluminationTex)\r\n            .ssbo(0, sceneData)\r\n            .build()\r\n        )\r\n\r\n        registerShader(\r\n            Stage.PRE_TRANSLUCENT,\r\n            new Composite(\"compositeGlobalIllumination\")\r\n            .vertex(\"program/fullscreen.vsh\")\r\n            .fragment(\"program/composite/compositeSSGI.fsh\")\r\n            .target(0, sceneTex)\r\n            .ssbo(0, sceneData)\r\n            .build()\r\n        )\r\n    }\r\n\r\n\r\n    registerShader(\r\n        Stage.PRE_TRANSLUCENT,\r\n        new Composite(\"compositeSky\")\r\n        .vertex(\"program/fullscreen.vsh\")\r\n        .fragment(\"program/composite/compositeSky.fsh\")\r\n        .target(0, sceneTex)\r\n        .build()\r\n    );\r\n\r\n    const cloudScatterTex = new Texture(\"cloudScatterTex\")\r\n        .format(Format.RGB16F)\r\n        .clear(false)\r\n        .width(parseInt(screenWidth))\r\n        .height(parseInt(screenHeight))\r\n        .mipmap(true)\r\n        .build();\r\n\r\n    const cloudTransmitTex = new Texture(\"cloudTransmitTex\")\r\n        .format(Format.RGB16F)\r\n        .clear(false)\r\n        .width(parseInt(screenWidth))\r\n        .height(parseInt(screenHeight))\r\n        .mipmap(true)\r\n        .build();\r\n\r\n    registerShader(\r\n        Stage.PRE_TRANSLUCENT,\r\n        new Composite(\"renderClouds\")\r\n        .vertex(\"program/fullscreen.vsh\")\r\n        .fragment(\"program/composite/renderClouds.fsh\")\r\n        .target(0, cloudScatterTex)\r\n        .target(1, cloudTransmitTex)\r\n        .ssbo(0, sceneData)\r\n        .build()\r\n    );\r\n\r\n    registerShader(\r\n        Stage.PRE_TRANSLUCENT,\r\n        new GenerateMips(cloudScatterTex),\r\n    );\r\n\r\n    registerShader(\r\n        Stage.PRE_TRANSLUCENT,\r\n        new GenerateMips(cloudTransmitTex)\r\n    );\r\n\r\n\r\n    registerShader(\r\n        Stage.PRE_TRANSLUCENT,\r\n        new Composite(\"compositeClouds\")\r\n        .vertex(\"program/fullscreen.vsh\")\r\n        .fragment(\"program/composite/compositeClouds.fsh\")\r\n        .target(0, sceneTex)\r\n        .ssbo(0, sceneData)\r\n        .build()\r\n    );\r\n\r\n\r\n\r\n    // ======================= COMPOSITES =======================\r\n\r\n    registerShader(\r\n        Stage.POST_RENDER,\r\n        new Composite(\"compositeTranslucents\")\r\n        .vertex(\"program/fullscreen.vsh\")\r\n        .fragment(\"program/composite/compositeTranslucents.fsh\")\r\n        .target(0, sceneTex)\r\n        .ssbo(0, sceneData)\r\n        .build()\r\n    );\r\n\r\n    registerShader(\r\n        Stage.POST_RENDER,\r\n        new Composite(\"cloudyFog\")\r\n        .vertex(\"program/fullscreen.vsh\")\r\n        .fragment(\"program/composite/cloudyFog.fsh\")\r\n        .target(0, sceneTex)\r\n        .ssbo(0, sceneData)\r\n        .build()\r\n    );\r\n\r\n    // ======================= POST =======================\r\n\r\n    if(getBoolSetting(\"DOF_ENABLE\")){\r\n        const DoFCoCTex = new Texture(\"DoFCoCTex\")\r\n        .format(Format.R16F)\r\n        .build();\r\n\r\n        registerShader(\r\n            Stage.POST_RENDER,\r\n            new Composite(\"DoFCoC\")\r\n            .vertex(\"program/fullscreen.vsh\")\r\n            .fragment(\"program/post/DoFCoC.fsh\")\r\n            .target(0, DoFCoCTex)\r\n            .build()\r\n        );\r\n\r\n        const DoFTex = new Texture(\"DoFTex\")\r\n            .format(Format.RGB16F)\r\n            .width(screenWidth * 0.5)\r\n            .height(screenWidth * 0.5)\r\n            .build();\r\n\r\n        registerShader(\r\n            Stage.POST_RENDER,\r\n            new Composite(\"DoFBlur\")\r\n            .vertex(\"program/fullscreen.vsh\")\r\n            .fragment(\"program/post/DoFBlur.fsh\")\r\n            .target(0, DoFTex)\r\n            .build()\r\n        );\r\n\r\n        registerShader(\r\n            Stage.POST_RENDER,\r\n            new Composite(\"DoFBlend\")\r\n            .vertex(\"program/fullscreen.vsh\")\r\n            .fragment(\"program/post/DoFBlend.fsh\")\r\n            .target(0, sceneTex)\r\n            .build()\r\n        );\r\n    }\r\n\r\n\r\n    registerShader(\r\n        Stage.POST_RENDER,\r\n        new Composite(\"temporalFilter\")\r\n            .vertex(\"program/fullscreen.vsh\")\r\n            .fragment(\"program/post/temporalFilter.fsh\")\r\n            .target(0, sceneTex)\r\n            .build()\r\n    );\r\n\r\n    registerShader(\r\n        Stage.POST_RENDER,\r\n        new Composite(\"copyHistory\")\r\n            .vertex(\"program/fullscreen.vsh\")\r\n            .fragment(\"program/post/copyHistory.fsh\")\r\n            .target(0, previousSceneTex)\r\n            .target(1, previousDepthTex)\r\n            .build()\r\n    );\r\n\r\n    // for(let i = 1; i <= maxMip; i++){\r\n    //     registerShader(\r\n    //         Stage.POST_RENDER,\r\n    //         new Composite(`generateDepthMip${i}`)\r\n    //             .vertex(\"program/fullscreen.vsh\")\r\n    //             .fragment(\"program/misc/buildHiZDepthMips.fsh\")\r\n    //             .target(0, previousDepthTex, i)\r\n    //             .define(\"DEPTH_SAMPLER\", \"previousDepthTex\")\r\n    //             .define(\"MIP_LEVEL\", i.toString())\r\n    //             .build()\r\n    //     );\r\n    // }\r\n\r\n\r\n    if(getBoolSetting(\"BLOOM_ENABLE\")){\r\n        const bloomTex = new Texture(\"bloomTex\")\r\n            .format(Format.RGB16F)\r\n            .clear(true)\r\n            .mipmap(true)\r\n            .build();\r\n\r\n        for(let i = 0; i < 8; i++){\r\n            registerShader(\r\n                Stage.POST_RENDER,\r\n                new Composite(`bloomDownsample${i}-${i+1}`)\r\n                .vertex(\"program/fullscreen.vsh\")\r\n                .fragment(\"program/post/bloomDownsample.fsh\")\r\n                .target(0, bloomTex, i + 1)\r\n                .define(\"BLOOM_INDEX\", i.toString())\r\n                .build()\r\n            )\r\n        }\r\n    \r\n        for(let i = 8; i > 0; i -= 1){\r\n            registerShader(\r\n                Stage.POST_RENDER,\r\n                new Composite(`bloomUpsample${i}-${i-1}`)\r\n                .vertex(\"program/fullscreen.vsh\")\r\n                .fragment(\"program/post/bloomUpsample.fsh\")\r\n                .target(0, bloomTex, i - 1)\r\n                .define(\"BLOOM_INDEX\", i.toString())\r\n                .build()\r\n            )\r\n        }\r\n    }\r\n\r\n    setCombinationPass(\r\n        new CombinationPass(\"program/final.fsh\")\r\n        .build()\r\n    );\r\n}\r\n"],
  "mappings": "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",
  "names": []
}
