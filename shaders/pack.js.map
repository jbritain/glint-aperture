{
  "version": 3,
  "sources": ["tslib/FlippableTexture.ts", "pack.ts"],
  "sourcesContent": ["import type {} from \"./iris\";\n\n// a texture which can be safely read from and written to in different places\n// it works by having texture A and texture B\n// if you want to \"flip\" the texture, you call .flip() - this swaps the two textures around\n// if you want to \"unflip\" the texture, you call .unflip() - this makes the texture read from wherever it was last written to\n// it is \"unflipped\" by default\nexport default class FlippableTexture {\n  public name: string;\n  private _imageName: string;\n  private _format: InternalTextureFormat;\n  private _width: number;\n  private _height: number;\n  private _depth: number;\n  private clearColorR: number;\n  private clearColorG: number;\n  private clearColorB: number;\n  private clearColorA: number;\n  private _clear: boolean;\n  private _mipmap: boolean;\n  private flipped = false;\n  private unflipped = true;\n\n  private textureA: Texture | BuiltTexture;\n  private textureB: Texture | BuiltTexture;\n\n  constructor(name: string) {\n    this.name = name;\n  }\n\n  public format(internalFormat: InternalTextureFormat): FlippableTexture {\n    this._format = internalFormat;\n\n    return this;\n  }\n\n  public width(width: number): FlippableTexture {\n    this._width = width;\n\n    return this;\n  }\n\n  public height(height: number): FlippableTexture {\n    this._height = height;\n\n    return this;\n  }\n\n  public depth(depth: number): FlippableTexture {\n    this._depth = depth;\n\n    return this;\n  }\n\n  public clearColor(\n    r: number,\n    g: number,\n    b: number,\n    a: number,\n  ): FlippableTexture {\n    this.clearColorR = r;\n    this.clearColorG = g;\n    this.clearColorB = b;\n    this.clearColorA = a;\n\n    return this;\n  }\n\n  public clear(clear: boolean): FlippableTexture {\n    this._clear = clear;\n    return this;\n  }\n\n  public mipmap(mipmap: boolean): FlippableTexture {\n    this._mipmap = mipmap;\n    return this;\n  }\n\n  public imageName(imageName: string): FlippableTexture {\n    this._imageName = imageName;\n    return this;\n  }\n\n  public build(): FlippableTexture {\n    this.textureA = new Texture(this.name + \"_a\");\n    this.textureB = new Texture(this.name + \"_b\");\n\n    if (this._format) {\n      this.textureA.format(this._format);\n      this.textureB.format(this._format);\n    }\n\n    if (this._width) {\n      this.textureA.width(this._width);\n      this.textureB.width(this._width);\n    }\n\n    if (this._height) {\n      this.textureA.height(this._height);\n      this.textureB.height(this._height);\n    }\n\n    if (this._depth) {\n      this.textureA.depth(this._depth);\n      this.textureB.depth(this._depth);\n    }\n\n    if (this._imageName) {\n      this.textureA.imageName(this._imageName + \"_a\");\n      this.textureB.imageName(this._imageName + \"_b\");\n    }\n\n    if (this.clearColorR) {\n      this.textureA.clearColor(\n        this.clearColorR,\n        this.clearColorG,\n        this.clearColorB,\n        this.clearColorA,\n      );\n      this.textureB.clearColor(\n        this.clearColorR,\n        this.clearColorG,\n        this.clearColorB,\n        this.clearColorA,\n      );\n    }\n\n    if (this._clear) {\n      this.textureA.clear(this._clear);\n      this.textureB.clear(this._clear);\n    }\n\n    if (this._mipmap) {\n      this.textureA.mipmap(this._mipmap);\n      this.textureB.mipmap(this._mipmap);\n    }\n\n    this.textureA = this.textureA.build();\n    this.textureB = this.textureB.build();\n    defineGlobally(this.name, this.sampler);\n    return this;\n  }\n\n  public get sampler() {\n    return this.name + (this.flipped ? \"_a\" : \"_b\");\n  }\n\n  public get target() {\n    return this.flipped != this.unflipped ? this.textureB : this.textureA;\n  }\n\n  // Swaps the sampler and rendertarget buffers. If the texture is currently \"unflipped\", this will cause the rendertarget to move, but the sampler to remain the same, meaning whatever was last written is still accessable in the sampler.\n  public flip(): void {\n\n    if(this.unflipped) print(\"unflipped, disabling\");\n    if (!this.unflipped) this.flipped = !this.flipped;\n    print(\"flipped: \" +  this.flipped);\n    this.unflipped = false;\n    defineGlobally(this.name, this.sampler);\n    print(\"sampler is now \" + this.sampler);\n    print(\n      \"target is now \" +\n        this.name +\n        (this.flipped != this.unflipped ? \"_b\" : \"_a\"),\n    );\n    print(\"---\");\n  }\n\n  // Causes the rendertarget to point to the same buffer as the sampler until the next flip operation. This is the default state.\n  public unflip(): void {\n    if (this.unflipped) return;\n    this.flipped = !this.flipped;\n    this.unflipped = true;\n    defineGlobally(this.name, this.sampler);\n    print(\"sampler is now \" + this.sampler);\n    print(\n      \"target is now \" +\n        this.name +\n        (this.flipped != this.unflipped ? \"_b\" : \"_a\"),\n    );\n    print(\"---\");\n  }\n}\n", "import type {} from './iris'\r\nimport FlippableTexture from './tslib/FlippableTexture';\r\n\r\nfunction setLightColors(){\r\n    // colours stolen from null\r\n\r\n    setLightColor(new NamespacedId(\"campfire\"), 255, 102, 0, 255);\r\n    setLightColor(new NamespacedId(\"candle\"), 245, 127, 68, 255);\r\n    setLightColor(new NamespacedId(\"cave_vines\"), 243, 133, 59, 255);\r\n    setLightColor(new NamespacedId(\"cave_vines_plant\"), 243, 133, 59, 255);\r\n    setLightColor(new NamespacedId(\"glow_lichen\"), 107, 238, 172, 255);\r\n    setLightColor(new NamespacedId(\"lantern\"), 243, 158, 73, 255);\r\n    setLightColor(new NamespacedId(\"jack_o_lantern\"), 193, 100, 38, 255);\r\n    setLightColor(new NamespacedId(\"magma_block\"), 193, 100, 38, 255);\r\n    setLightColor(new NamespacedId(\"ochre_froglight\"), 223, 172, 71, 255);\r\n    setLightColor(new NamespacedId(\"pearlescent_froglight\"), 224, 117, 232, 255);\r\n    setLightColor(new NamespacedId(\"redstone_torch\"), 249, 50, 28, 255);\r\n    setLightColor(new NamespacedId(\"redstone_wall_torch\"), 249, 50, 28, 255);\r\n    setLightColor(new NamespacedId(\"soul_campfire\"), 51, 204, 255, 255);\r\n    setLightColor(new NamespacedId(\"verdant_froglight\"), 99, 229, 60, 255);\r\n    setLightColor(new NamespacedId(\"torch\"), 255, 119, 0, 255);\r\n    setLightColor(new NamespacedId(\"wall_torch\"), 255, 119, 0, 255);\r\n    setLightColor(new NamespacedId(\"nether_portal\"), 100, 0, 255, 255);\r\n\r\n    setLightColor(new NamespacedId(\"small_amethyst_bud\"), 184, 88, 221, 255);\r\n    setLightColor(new NamespacedId(\"medium_amethyst_bud\"), 184, 88, 221, 255);\r\n    setLightColor(new NamespacedId(\"large_amethyst_bud\"), 184, 88, 221, 255);\r\n    setLightColor(new NamespacedId(\"amethyst_cluster\"), 184, 88, 221, 255);\r\n\r\n    const glassOpacity = 255;\r\n\r\n    setLightColor(new NamespacedId(\"tinted_glass\"), 50, 38, 56, glassOpacity);\r\n    setLightColor(new NamespacedId(\"white_stained_glass\"),      255, 255, 255, glassOpacity);\r\n    setLightColor(new NamespacedId(\"white_stained_glass_pane\"), 255, 255, 255, glassOpacity);\r\n    setLightColor(new NamespacedId(\"light_gray_stained_glass\"),      153, 153, 153, glassOpacity);\r\n    setLightColor(new NamespacedId(\"light_gray_stained_glass_pane\"), 153, 153, 153, glassOpacity);\r\n    setLightColor(new NamespacedId(\"gray_stained_glass\"),      76, 76, 76, glassOpacity);\r\n    setLightColor(new NamespacedId(\"gray_stained_glass_pane\"), 76, 76, 76, glassOpacity);\r\n    setLightColor(new NamespacedId(\"black_stained_glass\"),      25, 25, 25, glassOpacity);\r\n    setLightColor(new NamespacedId(\"black_stained_glass_pane\"), 25, 25, 25, glassOpacity);\r\n    setLightColor(new NamespacedId(\"brown_stained_glass\"),      102, 76, 51, glassOpacity);\r\n    setLightColor(new NamespacedId(\"brown_stained_glass_pane\"), 102, 76, 51, glassOpacity);\r\n\r\n    setLightColor(new NamespacedId(\"red_stained_glass\"),      153, 51, 51, glassOpacity);\r\n    setLightColor(new NamespacedId(\"red_stained_glass_pane\"), 153, 51, 51, glassOpacity);\r\n    setLightColor(new NamespacedId(\"orange_stained_glass\"),      216, 127, 51, glassOpacity);\r\n    setLightColor(new NamespacedId(\"orange_stained_glass_pane\"), 216, 127, 51, glassOpacity);\r\n    setLightColor(new NamespacedId(\"yellow_stained_glass\"),      229, 229, 51, glassOpacity);\r\n    setLightColor(new NamespacedId(\"yellow_stained_glass_pane\"), 229, 229, 51, glassOpacity);\r\n    setLightColor(new NamespacedId(\"lime_stained_glass\"),      127, 204, 25, glassOpacity);\r\n    setLightColor(new NamespacedId(\"lime_stained_glass_pane\"), 127, 204, 25, glassOpacity);\r\n    setLightColor(new NamespacedId(\"green_stained_glass\"),      102, 127, 51, glassOpacity);\r\n    setLightColor(new NamespacedId(\"green_stained_glass_pane\"), 102, 127, 51, glassOpacity);\r\n    setLightColor(new NamespacedId(\"cyan_stained_glass\"),      76, 127, 153, glassOpacity);\r\n    setLightColor(new NamespacedId(\"cyan_stained_glass_pane\"), 76, 127, 153, glassOpacity);\r\n    setLightColor(new NamespacedId(\"light_blue_stained_glass\"),      102, 153, 216, glassOpacity);\r\n    setLightColor(new NamespacedId(\"light_blue_stained_glass_pane\"), 102, 153, 216, glassOpacity);\r\n    setLightColor(new NamespacedId(\"blue_stained_glass\"),      51, 76, 178, glassOpacity);\r\n    setLightColor(new NamespacedId(\"blue_stained_glass_pane\"), 51, 76, 178, glassOpacity);\r\n    setLightColor(new NamespacedId(\"purple_stained_glass\"),      127, 63, 178, glassOpacity);\r\n    setLightColor(new NamespacedId(\"purple_stained_glass_pane\"), 127, 63, 178, glassOpacity);\r\n    setLightColor(new NamespacedId(\"magenta_stained_glass\"),      178, 76, 216, glassOpacity);\r\n    setLightColor(new NamespacedId(\"magenta_stained_glass_pane\"), 178, 76, 216, glassOpacity);\r\n    setLightColor(new NamespacedId(\"pink_stained_glass\"),      242, 127, 165, glassOpacity);\r\n    setLightColor(new NamespacedId(\"pink_stained_glass_pane\"), 242, 127, 165, glassOpacity);\r\n}\r\n\r\nfunction defineBoolGlobally(define){\r\n    if(getBoolSetting(define)){\r\n        defineGlobally(define, 1);\r\n    }\r\n}\r\n\r\n\r\nexport function setupShader(dimension : NamespacedId) {\r\n    worldSettings.pointNearPlane = 0.1;\r\n    worldSettings.pointFarPlane = 52.0;\r\n    \r\n    defineBoolGlobally(\"BLOOM_ENABLE\");\r\n    defineBoolGlobally(\"TEMPORAL_FILTER_ENABLE\");\r\n    defineGlobally(\"SHADOW_SAMPLES\", getIntSetting(\"SHADOW_SAMPLES\"));\r\n    defineBoolGlobally(\"SSGI_ENABLE\");\r\n    defineBoolGlobally(\"DEBUG_ENABLE\");\r\n    defineBoolGlobally(\"SHADOW_POINT_LIGHT\");\r\n    defineGlobally(\"POINT_NEAR_PLANE\", worldSettings.pointNearPlane);\r\n    defineGlobally(\"POINT_FAR_PLANE\", worldSettings.pointFarPlane);\r\n\r\n    enableShadows(1024, 4);\r\n\r\n    setLightColors();\r\n\r\n    const maxMip = Math.floor(Math.log2(Math.max(screenWidth, screenHeight)));\r\n\r\n    worldSettings.ambientOcclusionLevel = 0.0;//getBoolSetting(\"SSGI_ENABLE\") ? 0.0 : 1.0;\r\n    worldSettings.disableShade = true;\r\n    worldSettings.renderEntityShadow = false;\r\n    worldSettings.sunPathRotation = 40.0;\r\n    worldSettings.renderSun = false;\r\n    worldSettings.renderWaterOverlay = false;\r\n\r\n    const sceneData = new GPUBuffer(32)\r\n        .clear(true)\r\n        .build();\r\n\r\n    const blueNoiseTex = new PNGTexture(\"blueNoiseTex\", \"textures/blueNoise.png\", false, true);\r\n    const perlinNoiseTex = new PNGTexture(\"perlinNoiseTex\", \"textures/perlinNoise.png\", true, true);\r\n    const worleyNoiseTex = new PNGTexture(\"worleyNoiseTex\", \"textures/worleyNoise.png\", true, true);\r\n\r\n    const cloudShapeNoiseTex = new RawTexture(\"cloudShapeNoiseTex\", \"textures/cloudNoiseShape.bin\")\r\n        .width(128)\r\n        .height(128)\r\n        .depth(128)\r\n        .type(PixelType.UNSIGNED_BYTE)\r\n        .format(Format.RGBA8)\r\n        .blur(true)\r\n        .build();\r\n\r\n    const cloudErosionNoiseTex = new RawTexture(\"cloudErosionNoiseTex\", \"textures/cloudNoiseErosion.bin\")\r\n        .width(32)\r\n        .height(32)\r\n        .depth(32)\r\n        .type(PixelType.UNSIGNED_BYTE)\r\n        .format(Format.RGB8)\r\n        .blur(true)\r\n        .build();\r\n\r\n    const cloudHeightGradientTex = new PNGTexture(\"cloudHeightGradientTex\", \"textures/cloudHeightGradient.png\", false, true);\r\n\r\n    const debugTex = new Texture(\"debugTex\")\r\n        .format(Format.RGBA8)\r\n        .imageName(\"debugImg\")\r\n        .width(screenWidth).height(screenHeight)\r\n        .clear(true)\r\n        .clearColor(0, 0, 0, 0)\r\n        .build()\r\n\r\n    const previousSceneTex = new Texture(\"previousSceneTex\")\r\n        .format(Format.RGB16F)\r\n        .clear(false)\r\n        .mipmap(true)\r\n        .build();\r\n\r\n    const previousDepthTex = new Texture(\"previousDepthTex\")\r\n        .format(Format.RG16)\r\n        .clear(false)\r\n        .mipmap(true)\r\n        .build();\r\n\r\n    // ======================= SETUP =======================\r\n\r\n    const sunTransmittanceLUT = new Texture(\"sunTransmittanceLUTTex\")\r\n        .format(Format.RGBA16F)\r\n        .imageName(\"sunTransmittanceLUT\")\r\n        .width(256).height(64)\r\n        .clear(false)\r\n        .build();\r\n\r\n    registerShader(\r\n        Stage.SCREEN_SETUP,\r\n        new Compute(\"generateSunTransmittanceLUT\")\r\n        .location(\"program/sky/generateSunTransmittanceLUT.csh\")\r\n        .workGroups(32, 8, 1)\r\n        .build()\r\n    )\r\n\r\n    const multipleScatteringLUT = new Texture(\"multipleScatteringLUTTex\")\r\n        .format(Format.RGBA16F)\r\n        .imageName(\"multipleScatteringLUT\")\r\n        .width(32).height(32)\r\n        .clear(false)\r\n        .build();\r\n\r\n    registerShader(\r\n        Stage.SCREEN_SETUP,\r\n        new Compute(\"generateMultipleScatteringLUT\")\r\n        .location(\"program/sky/generateMultipleScatteringLUT.csh\")\r\n        .workGroups(4, 4, 1)\r\n        .build()\r\n    )\r\n\r\n    const skyViewLUT = new Texture(\"skyViewLUTTex\")\r\n        .format(Format.RGBA16F)\r\n        .imageName(\"skyViewLUT\")\r\n        .width(200).height(200)\r\n        .clear(true)\r\n        .mipmap(true)\r\n        .build()\r\n\r\n    // ======================= PREPARE =======================\r\n\r\n    registerShader(\r\n        Stage.PRE_RENDER,\r\n        new Compute(\"generateSkyViewLUT\")\r\n        .location(\"program/sky/generateSkyViewLUT.csh\")\r\n        .workGroups(25, 25, 1)\r\n        .ssbo(0, sceneData)\r\n        .build()\r\n    )\r\n\r\n    registerShader(\r\n        Stage.PRE_RENDER,\r\n        new GenerateMips(skyViewLUT)\r\n    );\r\n\r\n    registerShader(\r\n        Stage.PRE_RENDER,\r\n        new Compute(\"getSkylightColor\")\r\n        .location(\"program/sky/getSkylightColor.csh\")\r\n        .workGroups(1, 1, 1)\r\n        .ssbo(0, sceneData)\r\n        .build()\r\n    )\r\n\r\n    registerShader(Stage.PRE_RENDER, new MemoryBarrier(SSBO_BIT));\r\n\r\n    const cloudSkyLUT = new Texture(\"cloudSkyLUTTex\")\r\n        .format(Format.RGBA16F)\r\n        .width(512).height(512)\r\n        .clear(false)\r\n        .mipmap(true)\r\n        .build()\r\n\r\n    registerShader(\r\n        Stage.PRE_RENDER, \r\n        new Composite(\"renderCloudSKYLUT\")\r\n        .vertex(\"program/fullscreen.vsh\")\r\n        .fragment(\"program/prepare/renderCloudSkyLUT.fsh\")\r\n        .target(0, cloudSkyLUT)\r\n        .ssbo(0, sceneData)\r\n        .build()\r\n    );\r\n\r\n    registerShader(\r\n        Stage.PRE_RENDER,\r\n        new GenerateMips(previousSceneTex)\r\n    );\r\n\r\n    // ======================= SHADOW =======================\r\n\r\n    // these must be multiples of 64\r\n    const voxelMapWidth = 256;\r\n    const voxelMapHeight = 128;\r\n\r\n    defineGlobally(\"VOXEL_MAP_SIZE\", `vec3(${voxelMapWidth}, ${voxelMapHeight}, ${voxelMapWidth})`);\r\n\r\n    const floodfillVoxelMap1 = new Texture(\"floodFillVoxelMapTex1\")\r\n        .format(Format.RGBA16F)\r\n        .imageName(\"floodFillVoxelMap1\")\r\n        .clear(false)\r\n        .width(voxelMapWidth)\r\n        .height(voxelMapHeight)\r\n        .depth(voxelMapWidth)\r\n        .build();\r\n\r\n    const floodfillVoxelMap2 = new Texture(\"floodFillVoxelMapTex2\")\r\n        .format(Format.RGBA16F)\r\n        .imageName(\"floodFillVoxelMap2\")\r\n        .clear(false)\r\n        .width(voxelMapWidth)\r\n        .height(voxelMapHeight)\r\n        .depth(voxelMapWidth)\r\n        .build()\r\n\r\n    const voxelMap = new Texture(\"voxelMapTex\")\r\n        .format(Format.R32UI)\r\n        .imageName(\"voxelMap\")\r\n        .clear(true)\r\n        .clearColor(0.0, 0.0, 0.0, 0.0)\r\n        .width(voxelMapWidth)\r\n        .height(voxelMapHeight)\r\n        .depth(voxelMapWidth)\r\n        .build()\r\n\r\n    const shadowColorTex = new ArrayTexture(\"shadowColorTex\")\r\n    .format(Format.RGBA8)\r\n    .clear(true)\r\n    .build();\r\n\r\n    const shadowNormalTex = new ArrayTexture(\"shadowNormalTex\")\r\n        .format(Format.RGBA8)\r\n        .clear(true)\r\n        .clearColor(0.0, 0.0, 0.0, 0.0)\r\n        .build();\r\n\r\n    const shadowPositionTex = new ArrayTexture(\"shadowPositionTex\")\r\n        .format(Format.RGB16F)\r\n        .clear(true)\r\n        .build()\r\n\r\n    const shadowMaskTex = new ArrayTexture(\"shadowMaskTex\")\r\n        .format(Format.R8UI)\r\n        .clear(true)\r\n        .build()\r\n\r\n\r\n    registerShader(\r\n        new ObjectShader(\"shadow\", Usage.SHADOW)\r\n        .vertex(\"program/gbuffer/shadow.vsh\")\r\n        .fragment(\"program/gbuffer/shadow.fsh\")\r\n        .target(0, shadowColorTex)\r\n        .target(1, shadowNormalTex)\r\n        .target(2, shadowPositionTex)\r\n        .target(3, shadowMaskTex)\r\n\r\n        .blendFunc(0, Func.ONE, Func.ZERO, Func.ONE, Func.ZERO)\r\n        .blendFunc(1, Func.ONE, Func.ZERO, Func.ONE, Func.ZERO)\r\n        .blendFunc(2, Func.ONE, Func.ZERO, Func.ONE, Func.ZERO)\r\n        .build()\r\n    );\r\n\r\n    if(getBoolSetting(\"SHADOW_POINT_LIGHT\")){\r\n        registerShader(\r\n            new ObjectShader(\"point\", Usage.POINT)\r\n            .vertex(\"program/gbuffer/pointShadow.vsh\")\r\n            .fragment(\"program/gbuffer/pointShadow.fsh\")\r\n            .build()\r\n        );\r\n    }\r\n\r\n\r\n    // ======================= SHADOW COMPOSITE =======================\r\n\r\n    registerShader(\r\n        Stage.POST_SHADOW,\r\n        new Compute(\"floodfillPropagate\")\r\n        .location(\"program/composite/floodfillPropagate.csh\")\r\n        .workGroups(voxelMapWidth / 4, voxelMapHeight / 4, voxelMapWidth / 4)\r\n        .build()\r\n    );\r\n\r\n    registerShader(Stage.POST_SHADOW, new MemoryBarrier(IMAGE_BIT));\r\n\r\n    // ======================= GBUFFERS =======================\r\n    const sceneTex = new FlippableTexture(\"sceneTex\")\r\n        .format(Format.RGB16F)\r\n        .clear(true)\r\n        .clearColor(0.0, 0.0, 0.0, 1.0)\r\n        .build();\r\n\r\n    const translucentsTex = new Texture(\"translucentsTex\")\r\n        .format(Format.RGBA16F)\r\n        .clear(true)\r\n        .clearColor(0, 0, 0, 0)\r\n        .build();\r\n\r\n    const gbufferDataTex1 = new Texture(\"gbufferDataTex1\")\r\n        .format(Format.RGBA16)\r\n        .clear(true)\r\n        .build()\r\n\r\n    const gbufferDataTex2 = new Texture(\"gbufferDataTex2\")\r\n        .format(Format.RGBA16)\r\n        .clear(true)\r\n        .build()\r\n\r\n    registerShader(\r\n        new ObjectShader(\"sky\", Usage.SKYBOX)\r\n        .vertex(\"program/gbuffer/sky.vsh\")\r\n        .fragment(\"program/gbuffer/sky.fsh\")\r\n        .define(\"SKY_BASIC\", \"1\")\r\n        .target(0, sceneTex.target)\r\n        .build()\r\n    );\r\n\r\n    registerShader(\r\n        new ObjectShader(\"sky\", Usage.SKY_TEXTURES)\r\n        .vertex(\"program/gbuffer/sky.vsh\")\r\n        .fragment(\"program/gbuffer/sky.fsh\")\r\n        .define(\"SKY_TEXTURED\", \"2\")\r\n        .target(0, sceneTex.target)\r\n        .build()\r\n    );\r\n\r\n    const deferredGbuffers = [\r\n        Usage.TERRAIN_SOLID,\r\n        Usage.TERRAIN_CUTOUT,\r\n        Usage.ENTITY_SOLID,\r\n        Usage.ENTITY_CUTOUT,\r\n        Usage.BLOCK_ENTITY,\r\n        Usage.PARTICLES,\r\n        Usage.EMISSIVE,\r\n\r\n    ];\r\n\r\n    const forwardGbuffers = [\r\n        Usage.TERRAIN_TRANSLUCENT,\r\n        Usage.ENTITY_TRANSLUCENT,\r\n        Usage.BLOCK_ENTITY_TRANSLUCENT,\r\n        Usage.PARTICLES_TRANSLUCENT,\r\n        Usage.HAND,\r\n        Usage.TRANSLUCENT_HAND,\r\n        Usage.TEXTURED,\r\n        Usage.BASIC,\r\n        Usage.TEXT\r\n    ];\r\n\r\n    deferredGbuffers.forEach(program => {\r\n        registerShader(\r\n            new ObjectShader(\"terrain\", program)\r\n            .vertex(\"program/gbuffer/main.vsh\")\r\n            .fragment(\"program/gbuffer/main.fsh\")\r\n            .target(0, sceneTex.target)\r\n            .target(1, gbufferDataTex1)\r\n            .target(2, gbufferDataTex2)\r\n            // .blendOff(1)\r\n            // .blendOff(2)\r\n            .ssbo(0, sceneData)\r\n            .build()\r\n        );\r\n    })\r\n\r\n    forwardGbuffers.forEach(program => {\r\n        registerShader(\r\n            new ObjectShader(\"terrain\", program)\r\n            .vertex(\"program/gbuffer/main.vsh\")\r\n            .fragment(\"program/gbuffer/main.fsh\")\r\n            .target(0, translucentsTex)\r\n            .target(1, gbufferDataTex1)\r\n            .target(2, gbufferDataTex2)\r\n            .blendFunc(1, Func.ONE, Func.ZERO, Func.ONE, Func.ZERO)\r\n            .blendFunc(2, Func.ONE, Func.ZERO, Func.ONE, Func.ZERO)\r\n            .define(\"FORWARD_LIGHTING\", \"1\")\r\n            .ssbo(0, sceneData)\r\n            .build()\r\n        );\r\n    })\r\n\r\n\r\n    registerShader(\r\n        new ObjectShader(\"clouds\", Usage.CLOUDS)\r\n        .vertex(\"program/gbuffer/discard.vsh\")\r\n        .fragment(\"program/gbuffer/discard.fsh\")\r\n        .build()\r\n    );\r\n\r\n    // ======================= DEFERRED =======================\r\n\r\n    \r\n    registerShader(Stage.PRE_TRANSLUCENT, new MemoryBarrier(IMAGE_BIT));\r\n\r\n    const globalIlluminationTex = new Texture(\"globalIlluminationTex\")\r\n        .format(Format.R11F_G11F_B10F)\r\n        .clear(false)\r\n        .width(parseInt(screenWidth * 0.5))\r\n        .height(parseInt(screenHeight * 0.5))\r\n        .build();\r\n\r\n    registerShader(\r\n        Stage.PRE_TRANSLUCENT,\r\n        new Composite(\"deferredShading\")\r\n        .vertex(\"program/fullscreen.vsh\")\r\n        .fragment(\"program/composite/deferredShading.fsh\")\r\n        .target(0, sceneTex.target)\r\n        .ssbo(0, sceneData)\r\n        .build()\r\n    );\r\n\r\n    if(getBoolSetting(\"SSGI_ENABLE\")){\r\n        registerShader(\r\n            Stage.PRE_TRANSLUCENT,\r\n            new Composite(\"globalIllumination\")\r\n            .vertex(\"program/fullscreen.vsh\")\r\n            .fragment(\"program/composite/SSGI.fsh\")\r\n            .target(0, globalIlluminationTex)\r\n            .ssbo(0, sceneData)\r\n            .build()\r\n        )\r\n\r\n        registerShader(\r\n            Stage.PRE_TRANSLUCENT,\r\n            new Composite(\"compositeGlobalIllumination\")\r\n            .vertex(\"program/fullscreen.vsh\")\r\n            .fragment(\"program/composite/compositeSSGI.fsh\")\r\n            .target(0, sceneTex.target)\r\n            .ssbo(0, sceneData)\r\n            .build()\r\n        )\r\n    }\r\n\r\n\r\n    registerShader(\r\n        Stage.PRE_TRANSLUCENT,\r\n        new Composite(\"compositeSky\")\r\n        .vertex(\"program/fullscreen.vsh\")\r\n        .fragment(\"program/composite/compositeSky.fsh\")\r\n        .target(0, sceneTex.target)\r\n        .build()\r\n    );\r\n\r\n    const cloudScatterTex = new FlippableTexture(\"cloudScatterTex\")\r\n        .format(Format.RGB16F)\r\n        .clear(false)\r\n        .width(parseInt(screenWidth))\r\n        .height(parseInt(screenHeight))\r\n        .mipmap(true)\r\n        .build();\r\n\r\n    const cloudTransmitTex = new FlippableTexture(\"cloudTransmitTex\")\r\n        .format(Format.RGB16F)\r\n        .clear(false)\r\n        .width(parseInt(screenWidth))\r\n        .height(parseInt(screenHeight))\r\n        .mipmap(true)\r\n        .build();\r\n\r\n    \r\n\r\n    registerShader(\r\n        Stage.PRE_TRANSLUCENT,\r\n        new Composite(\"renderClouds\")\r\n        .vertex(\"program/fullscreen.vsh\")\r\n        .fragment(\"program/composite/renderClouds.fsh\")\r\n        .target(0, cloudScatterTex.target)\r\n        .target(1, cloudTransmitTex.target)\r\n        .ssbo(0, sceneData)\r\n        .build()\r\n    );\r\n\r\n\r\n    registerShader(\r\n        Stage.PRE_TRANSLUCENT,\r\n        new Composite(\"compositeClouds\")\r\n        .vertex(\"program/fullscreen.vsh\")\r\n        .fragment(\"program/composite/compositeClouds.fsh\")\r\n        .target(0, sceneTex.target)\r\n        .ssbo(0, sceneData)\r\n        .build()\r\n    );\r\n\r\n\r\n\r\n    // ======================= COMPOSITES =======================\r\n\r\n    sceneTex.flip();\r\n    registerShader(\r\n        Stage.POST_RENDER,\r\n        new Composite(\"compositeTranslucents\")\r\n        .vertex(\"program/fullscreen.vsh\")\r\n        .fragment(\"program/composite/compositeTranslucents.fsh\")\r\n        .target(0, sceneTex.target)\r\n        .ssbo(0, sceneData)\r\n        .build()\r\n    );\r\n    sceneTex.unflip();\r\n\r\n    registerShader(\r\n        Stage.POST_RENDER,\r\n        new Composite(\"cloudyFog\")\r\n        .vertex(\"program/fullscreen.vsh\")\r\n        .fragment(\"program/composite/cloudyFog.fsh\")\r\n        .target(0, sceneTex.target)\r\n        .ssbo(0, sceneData)\r\n        .build()\r\n    );\r\n\r\n    // ======================= POST =======================\r\n\r\n    if(getBoolSetting(\"DOF_ENABLE\")){\r\n        const DoFCoCTex = new Texture(\"DoFCoCTex\")\r\n        .format(Format.R16F)\r\n        .build();\r\n\r\n        registerShader(\r\n            Stage.POST_RENDER,\r\n            new Composite(\"DoFCoC\")\r\n            .vertex(\"program/fullscreen.vsh\")\r\n            .fragment(\"program/post/DoFCoC.fsh\")\r\n            .target(0, DoFCoCTex)\r\n            .build()\r\n        );\r\n\r\n        const DoFTex = new Texture(\"DoFTex\")\r\n            .format(Format.RGB16F)\r\n            .width(screenWidth * 0.5)\r\n            .height(screenWidth * 0.5)\r\n            .build();\r\n\r\n        registerShader(\r\n            Stage.POST_RENDER,\r\n            new Composite(\"DoFBlur\")\r\n            .vertex(\"program/fullscreen.vsh\")\r\n            .fragment(\"program/post/DoFBlur.fsh\")\r\n            .target(0, DoFTex)\r\n            .build()\r\n        );\r\n\r\n        registerShader(\r\n            Stage.POST_RENDER,\r\n            new Composite(\"DoFBlend\")\r\n            .vertex(\"program/fullscreen.vsh\")\r\n            .fragment(\"program/post/DoFBlend.fsh\")\r\n            .target(0, sceneTex.target)\r\n            .build()\r\n        );\r\n    }\r\n\r\n\r\n    registerShader(\r\n        Stage.POST_RENDER,\r\n        new Composite(\"temporalFilter\")\r\n            .vertex(\"program/fullscreen.vsh\")\r\n            .fragment(\"program/post/temporalFilter.fsh\")\r\n            .target(0, sceneTex.target)\r\n            .build()\r\n    );\r\n\r\n    registerShader(\r\n        Stage.POST_RENDER,\r\n        new Composite(\"copyHistory\")\r\n            .vertex(\"program/fullscreen.vsh\")\r\n            .fragment(\"program/post/copyHistory.fsh\")\r\n            .target(0, previousSceneTex)\r\n            .target(1, previousDepthTex)\r\n            .build()\r\n    );\r\n\r\n    // for(let i = 1; i <= maxMip; i++){\r\n    //     registerShader(\r\n    //         Stage.POST_RENDER,\r\n    //         new Composite(`generateDepthMip${i}`)\r\n    //             .vertex(\"program/fullscreen.vsh\")\r\n    //             .fragment(\"program/misc/buildHiZDepthMips.fsh\")\r\n    //             .target(0, previousDepthTex, i)\r\n    //             .define(\"DEPTH_SAMPLER\", \"previousDepthTex\")\r\n    //             .define(\"MIP_LEVEL\", i.toString())\r\n    //             .build()\r\n    //     );\r\n    // }\r\n\r\n    if(getBoolSetting(\"BLOOM_ENABLE\")){\r\n        const bloomTex = new Texture(\"bloomTex\")\r\n            .format(Format.RGB16F)\r\n            .clear(true)\r\n            .mipmap(true)\r\n            .build();\r\n\r\n        for(let i = 0; i < 5; i++){\r\n            registerShader(\r\n                Stage.POST_RENDER,\r\n                new Composite(`bloomDownsample${i}-${i+1}`)\r\n                .vertex(\"program/fullscreen.vsh\")\r\n                .fragment(\"program/post/bloomDownsample.fsh\")\r\n                .target(0, bloomTex, i + 1)\r\n                .define(\"BLOOM_INDEX\", i.toString())\r\n                .build()\r\n            )\r\n        }\r\n    \r\n        for(let i = 5; i > 0; i -= 1){\r\n            registerShader(\r\n                Stage.POST_RENDER,\r\n                new Composite(`bloomUpsample${i}-${i-1}`)\r\n                .vertex(\"program/fullscreen.vsh\")\r\n                .fragment(\"program/post/bloomUpsample.fsh\")\r\n                .target(0, bloomTex, i - 1)\r\n                .define(\"BLOOM_INDEX\", i.toString())\r\n                .build()\r\n            )\r\n        }\r\n    }\r\n    setCombinationPass(\r\n        new CombinationPass(\"program/final.fsh\")\r\n        .define(sceneTex.name, sceneTex.sampler)\r\n        .build()\r\n    );\r\n}\r\n"],
  "mappings": "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",
  "names": []
}
